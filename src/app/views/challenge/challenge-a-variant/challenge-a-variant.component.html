<ng-container *ngIf="challengeState$ | async as state">
  <app-show-answer-overlay *ngIf="state.showAnswer" (click)="nextWord()">
  </app-show-answer-overlay>


  <div class="middle-container">
    <app-history-back-button *ngIf="history.length && historyCurrentStepIndex !== 0"
                             (click)="backInHistory()">
    </app-history-back-button>

    <app-history-forward-button *ngIf="showHistory"
                                (click)="forwardInHistory()">
    </app-history-forward-button>

    <app-v-a-middle-section
            [showHistory]="showHistory"
            [word]="showHistory ? historyCurrentStep : state.currentWord"
            [showAnswer]="showHistory ? true : state.showAnswer"
            [lastAnswerCorrect]="showHistory ? historyCurrentStep.answerCorrect : state.lastAnswerCorrect">
    </app-v-a-middle-section>
  </div>

  <app-v-a-bottom-section
    class="bottom-container"
    [class.hide]="showHistory"
    [currentWord]="state.currentWord"
    [roundWords]="state.currentWordAnswers"
    (action)="handleAnswer($event)">
  </app-v-a-bottom-section>
</ng-container>
